{% extends 'NumaDOAAdminBundle::layout.html.twig' %}
{% block javascripts %}
    {{ parent() }}
    {% javascripts '@colorbox_js' %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}

{% endblock %}
{% block content %}
    <h1>Image Carousel list</h1>

    <div class="box box-default">

        <div class="box-header">
            <div class="box-tools">
                <a class="btn btn-primary" href="{{ path('imagecarousel_new') }}">
                    Add new images
                </a>
            </div>
            <div class="row">
            <div class="col-lg-6">
                <div class="input-group">
                    {{ form_start(addVideoForm) }}
                    {{ form_widget(addVideoForm.url) }}
                    <span class="input-group-btn">
                        {{ form_widget(addVideoForm.send) }}
                        {{ form_end(addVideoForm) }}
                    </span>
                </div><!-- /input-group -->
            </div><!-- /.col-lg-6 -->
            </div>
        </div>

        <div class="box-body table-responsive no-padding">
            <table class="table">
                <thead>
                <tr>

                    <th>Src</th>
                    <th>Title</th>
                    <th>Url</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for entity in entities %}
                    {% set image=entity.getUploadDir()~"/"~entity.src %}
                    <tr>
                        <td>
                            {% if  "youtube" in entity.src %}
                                <a class="colorbox_youtube" href="{{ getYoutubeEmbed(getYoutubeId(entity.src)) }}"
                                   title="{{ entity.title }}">
                                    <img
                                            src="{{ getYoutubeThumb(getYoutubeId(entity.src)) }}"
                                            alt="image"
                                            width="120px"
                                            class="thumbnail"/>
                                </a>
                            {% else %}
                                <a class="colorbox cimage" href="{{ asset(image,null,true) }}"
                                   title="{{ entity.title }}">
                                    <img class="thumbnail" src="{{ image|imagine_filter('search_image') }}"/>
                                </a>
                            {% endif %}
                        </td>
                        <td>{{ entity.title }}</td>
                        <td>{{ entity.url }}</td>
                        <td>
                            <ul class="list-inline">
                                <li>
                                    <a class="btn btn-primary"
                                       href="{{ path('imagecarousel_edit', { 'id': entity.id }) }}">edit</a>
                                </li>
                                <li>
                                    <a class="btn btn-warning"
                                       href="{{ path('imagecarousel_edit', { 'id': entity.id }) }}">disable</a>
                                </li>
                                <li>
                                    <a class="btn btn-danger"
                                       href="{{ path('imagecarousel_delete', { 'id': entity.id }) }}">delete</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <script>

        $(document).ready(function () {
            $('a.colorbox').colorbox({maxWidth: '95%', maxHeight: '95%', rel: 'group1'});
            $("a.colorbox_youtube").colorbox({iframe:true, innerWidth:640, innerHeight:390});
        });

    </script>
{% endblock %}
