{% extends 'NumaDOADMSBundle::layout.html.twig' %}
{% import "NumaDOASiteBundle::components.html.twig" as component %}
{% block content %}
    <div class="box">
        <div class="box-header">
            <h3 class="box-title">Theme chooser</h3>

        </div>
    </div>

    {% if app.session.get('dms_dealer_id') is null %}
        <div class="alert alert-danger" role="alert">
            <strong>Attention:</strong> You must be logged in like dealer to change theme.
        </div>
    {% else %}
        <div class="alert">
            <span id="alert-message"></span>
        </div>
        <script>
            $(document).ready(function () {
                var name = "";
                $(".theme").click(function () {
                    console.log(this);
                    $(".theme").removeClass("themeactive");
                    $(this).addClass("themeactive");
                    $(".theme > .glyphicon").addClass("hidden");
                    $(".themeactive > .glyphicon").removeClass("hidden");

                    name = $(this).data("name");
                    console.log(name);

                });

                $("#change").click(function () {
                    $.ajax(
                            {
                                url: "{{ path('dms_change_themes') }}",
                                type: "POST",
                                data: {"theme": name},
                                success: function (data, textStatus, jqXHR) {
                                    //alert(theme);
                                    //console.log (theme);
                                    //location.reload();
                                    $(".alert").addClass('alert-success');
                                    $(".alert").removeClass('alert-error');
                                    $("#alert-message").html("Theme successfully changed for {{ dealer.name }}. Current theme is "+name);
                                },
                                error: function (jqXHR, textStatus, errorThrown) {
                                    //alert("Error");
                                    $(".alert").addClass('alert-error');
                                    $(".alert").removeClass('alert-success');
                                    $("#alert-message").html("Theme successfully changed");
                                }
                            });
                })
            });

            {#$(document).ready(function(){#}
            {#$("#theme2").click(function(){#}
            {#$("#theme2").css('border', '1px solid black');#}
            {#$("#theme2").css('border-radius', '10px');#}
            {#$("#theme1").css('border', 'none');#}
            {#$.ajax(#}
            {#{#}
            {#url: "{{ path('dms_change_themes') }}",#}
            {#type: "POST",#}
            {#data: {"theme":'Sea'},#}
            {#success: function(data, textStatus, jqXHR)#}
            {#{#}
            {#//alert(theme);#}
            {#//console.log (theme);#}
            {#location.reload();#}
            {#},#}
            {#error: function(jqXHR, textStatus, errorThrown)#}
            {#{#}
            {#alert("Error");#}
            {#}#}
            {#});#}
            {#});#}
            {#});#}
        </script>
    {% endif %}
    <div>
        <div class="col-md-3 theme {% if theme == "Default" %}themeactive{% endif %}" id="theme1" data-name="Default">

            {{ component.image('images/themes/theme1.jpg', 'theme1', '', 'themes_image','400px') }}
            <h4>Default Theme</h4>
            <span class="{% if theme != "Default" %}hidden{% endif %} glyphicon glyphicon-ok"></span>
        </div>
        <div class="col-md-3 theme {% if theme == "Sea" %}themeactive{% endif %}" id="theme2" data-name="Sea">
            {{ component.image('images/themes/theme2.jpg', 'theme1', '', 'themes_image','400px') }}
            <h4>Sea Theme</h4>
            <span class="{% if theme != "Sea" %}hidden{% endif %} glyphicon glyphicon-ok"></span>
        </div>
        <div class="col-md-3 theme {% if theme == "Mountain" %}themeactive{% endif %}" id="theme3" data-name="Mountain">
            {{ component.image('images/themes/theme3.jpg', 'theme1', '', 'themes_image','400px') }}
            <h4>Mountain Theme</h4>
            <span class="{% if theme != "Mountain" %}hidden{% endif %} glyphicon glyphicon-ok"></span>
        </div>
        <div class="col-md-3 theme {% if theme == "Forest" %}themeactive{% endif %}" id="theme4" data-name="Forest">
            {{ component.image('images/themes/theme4.jpg', 'theme1', '', 'themes_image','400px') }}
            <h4>Forest Theme</h4>
            <span class="{% if theme != "Forest" %}hidden{% endif %} glyphicon glyphicon-ok"></span>
        </div>
    </div>
    <div class="clear"></div>
    <button id="change" class="btn btn-success">Change the theme</button>

{% endblock %}