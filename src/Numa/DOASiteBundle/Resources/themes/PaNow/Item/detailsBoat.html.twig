{% extends 'NumaDOASiteBundle::listing-layout.html.twig' %}
{% form_theme driveForm with ['bootstrap_3_horizontal_layout.html.twig',_self] %}
{% form_theme epriceForm with ['bootstrap_3_horizontal_layout.html.twig',_self] %}
{% form_theme financeForm with ['bootstrap_3_horizontal_layout.html.twig',_self] %}
{% form_theme contactForm with ['bootstrap_3_horizontal_layout.html.twig',_self] %}
{% form_theme offerForm with ['bootstrap_3_horizontal_layout.html.twig',_self] %}
{% form_theme offerTradeInForm with ['bootstrap_3_horizontal_layout.html.twig'] %}
{% import "NumaDOASiteBundle::components.html.twig" as component %}
{% block form_label_class -%}
    col-sm-3
{%- endblock form_label_class %}
{% block form_group_class -%}
    col-sm-9
{%- endblock form_group_class %}
{% block javascripts %}
    {{ parent() }}
    <script src='https://www.google.com/recaptcha/api.js'></script>
{% endblock %}

{% block content %}

    <div class="detailsContent">
        {% include "@NumaDOAAdmin/flashmsg.html.twig" %}

        <div class="row">
            <div class="col-md-12">
                {% include "NumaDOASiteBundle:TemplatesElements:title.html.twig" %}
            </div>
        </div>
        <div class="row">
            <div class="left col-md-6">

                {% include "@NumaDOASite/TemplatesElements/price.html.twig" %}
                {% include "@NumaDOASite/TemplatesElements/vehicleSmallDetails.html.twig" %}
                <div class="row">
                    <div class="col-md-4 col-xs-12 button">
                        <button type="button" class="submit" data-toggle="modal"
                                data-target="#offerTradeIn">
                            Request <br/>Information
                        </button>
                    </div>
                    <div class="col-md-4 col-xs-12  button">
                        <button type="button" class="submit" data-toggle="modal"
                                data-target="#offer">
                            Make an <br/>Offer
                        </button>
                    </div>
                    <div class="col-md-4 col-xs-12 button">
                        <button type="button" class="submit " data-toggle="modal"
                                data-target="#testdrive">
                            Test <br/>Drive
                        </button>
                    </div>
                </div>

                <div class="row shared">
                    {% include "@NumaDOASite/TemplatesElements/share.html.twig" %}
                </div>
            </div>
            <div class="col-md-6">
                <div class="row">
                    {% include "@NumaDOASite/TemplatesElements/imageSlideshow.html.twig" %}
                </div>

            </div>
        </div>
    </div>


    {% include "@NumaDOASite/TemplatesElements/vehicleDescription.html.twig" %}
    {% include "@NumaDOASite/TemplatesElements/vehicleDetails.html.twig" %}

    {% include "@NumaDOASite/TemplatesElements/vehicleFeatures.html.twig" %}
    {% include "@NumaDOASite/TemplatesElements/video.html.twig" %}

    <div class="dealer-info clearfix">
        <div class="col-md-6  col-xs-12">
            <ul class="list-unstyled">
                <li>
                    <a href="#"><i class="fa fa-user"></i> {{ dealer }}</a>
                </li>
                <li>
                    <a href="mailto:{{ dealer.email }}"><i class="fa fa-envelope"></i>{{ dealer.email }}</a>
                </li>
                <li>
                    <a href="tel:{{ dealer.phone }}"><i class="fa fa-phone"></i>{{ dealer.phone }}</a>
                </li>
                <li>
                    <div class="adr">
                        <div class="street-address">
                            <i class="fa fa-map-marker-alt "></i>{{ dealer.address }}
                        </div>
                        <span class="locality">{{ dealer.city }}</span>, <span class="region">{{ dealer.state }}</span>
                        <span class="postal-code">{{ dealer.zip }}</span>
                    </div>
                </li>
                <li>
                    <div class="map-link">
                        <div class="location map-link">See map: <a
                                    href="{{ dealer.siteGooglemap }}"
                                    target="_blank">Google Maps</a></div>
                    </div>
                </li>
                <li>
                    <a href="{{ dealer.siteUrl }}" target="_blank"><i class="fa fa-edit"></i> {{ dealer.siteUrl }}</a>
                </li>
            </ul>
        </div>
        <div class="col-md-6 col-xs-12">
            {{ component.image(dealer.logoUrl, dealer.name, 'logo', 'panow_logo') }}
            </a>
        </div>

    </div>


    <div class="disclaimer">
        {{ displayComponent('details_disclaimer','html','page','bridge') }}
    </div>
    </div>
    <!-- Button trigger modal -->
    {{ include("NumaDOASiteBundle:ListingForms:listingForms.html.twig") }}
    <script>
        $(".saveAd").on("click", function () {
            var itemId = $(this).data("itemid");
            console.log(itemId);
            var act = "add";
            if (!$(this).prop('checked')) {
                act = "remove";
            }
            var jqxhr = $.post("{{ path('item_savead') }}", {
                itemid: itemId,
                act: act
            }, function (data) {
                htmlx = "";
                if (data.savedAds > 0) {
                    htmlx = "(" + data.savedAds + ")";
                }
                $('.savedAds').html(htmlx);
            })

        });
        $(".compareAd").on("click", function () {
            var itemId = $(this).data("itemid");
            var url = $(this).data("url");

            var act = "add";
            if (!$(this).prop('checked')) {
                act = "remove";
            }
            var jqxhr = $.post(url, {itemid: itemId, act: act}, function (data) {
                htmlx = "";
                if (data.comparedItes > 0) {
                    htmlx = "(" + data.comparedItes + ")";
                }
                $('.savedAds').html(htmlx);
            })

        });
    </script>
{% endblock %}
