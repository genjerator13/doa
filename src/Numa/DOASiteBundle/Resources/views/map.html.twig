<div id="map"></div>
<script src="https://maps.googleapis.com/maps/api/js"></script>
<script>
    var geocoder = new google.maps.Geocoder();
    {% if (dealer is defined and dealer is not empty) %}
    var address = "{{dealer.address}},{{dealer.city}}";
    {% else %}
    var address = "saskatoon";
    {% endif %}
    var latitude = 44.5403;
    var longitude = -78.5463;
    geocoder.geocode({'address': address}, function (results, status) {
        console.log(status + ":::::" + address);
        if (status == google.maps.GeocoderStatus.OK) {
            latitude = results[0].geometry.location.lat();
            longitude = results[0].geometry.location.lng();

        }
    });
            function initMap() {
                var mapDiv = document.getElementById('map');
                var map = new google.maps.Map(mapDiv, {
                    center: {lat: 44.540, lng: longitude},
                    zoom: 8
                });
            }
</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAq6fKea9t6GnGouD3iI8DjHrWmDClCsfU&callback=initMap">
</script>

